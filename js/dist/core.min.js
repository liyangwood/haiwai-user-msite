"use strict";(function(){this.KG&&(this._KG=KG),this.KG={}}).call(window),function(){var t="http://www.haiwai.com";KG.config={root:"/haiwai-user-msite",SiteRoot:t,ApiRoot:t+"/service/api/"},KG.Const={};var e={image:KG.config.root+"/image/user_default.png",defaultImage:KG.config.root+"/image/user_default.png",email:"haiwai@chinagate.com",userid:14678,token:"7e68db968c5e8e36872770b0bdcf342f",isLogin:!0};KG.user={get:function(t){return t?e[t]:e}};var i={};KG.data={get:function(t){return t?i[t]:i},add:function(t){util.extend(i,t||{})}},template.helper("absImage",function(t){return/^http/.test(t)?t:KG.config.SiteRoot+t})}();
!function(){function t(t){return a[t]||null}function e(){return"IObject.random-"+i++}"function"!=typeof Object.create&&(Object.create=function(t){var e=function(){};return e.prototype=t,new e});var n={extend:function(t,e){return e=e||!1,$.extend(e,this,t),this},proxy:function(t,e){return $.isArray(e)||(e=Array.prototype.slice.call(arguments,1)),t.apply(this,e)},call:function(t,e,n){return $.isArray(n)||(n=Array.prototype.slice.call(arguments,2)),e.apply(t,n)},getParent:function(t){var e=this.__base,n=this.__name;if(!t&&!n)return e;for(;e;){if(t&&e.__name===t)return e;if(n!==e.__name)return e;e=e.__base}return e},callParent:function(t,e,n){"string"!=typeof e&&(n=e,e=null);var r,a,i=null;return r=e?this.getParent(e):this.__base||this,r&&(a=r.fn[t],i=a.apply(this,n)),i}},r=function(t,e){return $.extend(t,e)},a={},i=0,o=function(i,o){var s=arguments;"string"!=typeof i?(o=s[0],i=e()):t(i)&&alert(i+" is already exist");var c=null;if(o.ParentClass&&(c=o.ParentClass,delete o.ParentClass),c&&"string"==typeof c&&(c=t(c),!c))throw console.log(o,i),o.ParentClass+" is not exist";var u=function(){this._init&&this._init.apply(this,arguments)};return o.Static&&(u._static=o.Static,delete o.Static),c?(u.prototype=Object.create(c.prototype||c),u.prototype.__base=c,u.prototype.constructor=u,u.prototype.__static=u._static):u.prototype.fn=o,u.fn=u.prototype,$.extend(u.fn,n),o&&r(u.fn,o),u.fn.__type="IObject",u.fn.__name=i,a[i]=u,u},s={define:o,getByName:t,getAll:function(){return a}};KG.Class=s}();
"use strict";!function(){var e=1,t={};_.extend(t,_),t.extend(t,{formatDate:function(e,t){function o(e){return 10>e?"0"+e:e}10===e.toString().length&&(e=1e3*parseInt(e));var a=new Date(e),i=a.getFullYear(),n=o(a.getMonth()+1),l=o(a.getDate()),d=o(a.getHours()),s=o(a.getMinutes()),r=o(a.getSeconds());return t.replace("yy",i).replace("mm",n).replace("dd",l).replace("h",d).replace("m",s).replace("s",r)},getUuid:function(){return"uuid_"+e++},uploadImage:function(e,t){if(e){var o=new FileReader;o.onload=function(e){var o=e.target.result;KG.request.uploadImage({image:o},function(e,o){e&&t(o.files[0])})},o.readAsDataURL(e)}}}),t.message={register:function(e,t){$("body").unbind(e).bind(e,t)},publish:function(e,t){$("body").trigger(e,t)}},t.dialog={init:function(){var e=['<div class="modal fade" id="kg_modal_dialog" tabindex="-1" role="dialog">','<div class="modal-dialog" role="document">','<div class="modal-content box">',"</div>","</div>","</div>"].join("");e=$(e),e.on("hidden.bs.modal",function(){var t=e.find(".box");t.find(".js_yes").unbind("click"),t.empty()}),e.appendTo("body")},get:function(e){$("#kg_modal_dialog").length<1&&t.dialog.init();var o=$("#kg_modal_dialog"),a=t.extend({title:"信息提示",body:"点击确认，我们将为您删除这个店铺的所有信息，包括基本信息，图片，店铺评级和评论等，并且不能再找回这些信息，请谨慎操作。",foot:!0,type:"confirm",YesText:"确认",YesFn:t.noop,NoText:"取消",end:null},e),i=['{{if type!=="toast"}}','<div class="modal-header">','<button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="fa fa-times"></i></button>',"</div>","{{/if}}",'<div class="modal-body">',"{{if title}}",'<h4 class="hw-title">{{title}}</h4>',"{{/if}}",'<div class="hw-body">{{#body}}</div>',"</div>","{{if foot}}",'<div class="modal-footer">','<button type="button" class="hw-btn hw-light-btn" data-dismiss="modal">{{NoText}}</button>','{{if YesText}}<button type="button" class="hw-btn hw-blue-btn js_yes">{{YesText}}</button>{{/if}}',"</div>","{{/if}}"].join("");return i=template.compile(i)(a),o.find(".box").html(i),o.find(".js_yes").click(a.YesFn),o},show:function(e){var o=t.dialog.get(e);o.modal()},hide:function(){var e=t.dialog.get();e.modal("hide")}},t.alert=function(e){t.dialog.show({body:e,NoText:"确定",YesText:!1})},t.url={param:function(e,t){t=t||location.search,e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+e+"=([^&#]*)"),a=o.exec(t);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}},window.util=KG.util=t}(),function(){template.helper("formatDate",function(e,t){return util.formatDate(e,t||"yy年mm月dd日 h:m:s")}),template.helper("storeFullAddress",function(e){return e.address+", "+e.city+", "+e.state+" "+e.zip}),template.helper("defaultUserImage",function(e){return e?e:KG.user.get("defaultImage")})}();
KG.request={ajax:function(e,t,a){var r=KG.config.ApiRoot+"?format=json",i=e.method||"get";delete e.method;var n=$.Deferred();return e.url&&(r+="&"+e.url,delete e.url),$.ajax({type:i,url:r,data:e,dataType:"json",success:function(e){t&&t.call(null,!!e.status,e["return"]),n.resolve(e["return"])},error:function(e){a&&a(e),n.reject(e)}}),n},defer:function(e,t,a){var r=[];util.each(e,function(e){r.push(e())}),$.when.apply($,r).then(t,a)},mockData:function(e,t,a){var r=$.Deferred();return util.delay(function(){t&&t(!0,e),r.resolve(e)},500),r},getBizList:function(e,t,a){var r={func:"biz",userid:KG.user.get("userid"),detail:1,token:KG.user.get("token")};return this.ajax(r,t,a)},getBizCouponList:function(e,t,a){var r=[{logo:"/images/165/118/upload/classifiedinfo/19/f9/05/19f905692cf998e30745e31e9f3d28e9.jpg",title:"全场满100元送午餐券",count:100,stop:!0,startTime:1449772731230,endTime:1449772831230},{logo:"/images/165/118/upload/classifiedinfo/19/f9/05/19f905692cf998e30745e31e9f3d28e9.jpg",title:"全场满100元送午餐券",count:100,startTime:1449772731230,endTime:1449772831230}];return this.mockData(r,t,a)},getSystemMessageList:function(e,t,a){var r=[{id:1,title:"欢迎加入海外同城",msgbody:"欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城",createTime:Date.now(),fromUser:"海外管理员"},{id:2,title:"欢迎加入海外同城11111",msgbody:"欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城",createTime:Date.now(),fromUser:"海外管理员22"}];return this.mockData(r,t,a)},getSystemMessageDetail:function(e,t,a){var r={id:e.id,title:"欢迎加入海外同城",msgbody:"欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城欢迎加入海外同城",createTime:Date.now(),fromUser:"海外管理员"};return this.mockData(r,t,a)},uploadImage:function(e,t,a){var r={url:"func=article&act=upload",method:"post",type:"image","uploadfield[]":e.image};return this.ajax(r,t,a)},getAllAddressAreaInfo:function(e,t,a){var r={func:"biz",act:"get_allregion"};return this.ajax(r,t,a)},getUserDetailInfo:function(e,t,a){var r={act:"getuser",check:"0aedbf673e0c9bd37540b75a46af5a12",func:"passport",userid:15623};return this.ajax(r,function(e,a){t(!0,a[15623])},a)}};
"use strict";!function(){KG.Class.define("BaseComponent",{_init:function(t,e,i){var a=this;this.box=t,this.config=i||{},this._initProp(),this.getData(t,e,function(t){a.data=t,a.initVar(),a._initView(),a._initEvent(),a._initEnd()})},getTemplate:function(){},initVar:function(){},_initView:function(){this.initView(),this.html=template.compile(this.getTemplate())(this.data),this.elem=$(this.html),KG.component.init(this.elem),this.jq=util.extend(this.setJqVar(),this.callParent("setJqVar"))},setJqVar:function(){return{}},_initEvent:function(){this.initEvent(),util.message.register(this.__name,this.registerMessage)},_initEnd:function(){this.elem.data("kg-obj",this);var t=this.box.attr("style"),e=this.box.attr("class");this.elem.attr("style",t),this.elem.addClass(e),this.box.replaceWith(this.elem),this.initEnd()},getData:function(t,e,i){i.call(this,{})},_initProp:function(){var t=util.extend(this.defineProperty(),this.callParent("defineProperty")),e={},i=this.box;util.each(t,function(t,a){t=t||{};var s=i.data(a);e[a]=util.isUndefined(s)?t.defaultValue:util.isFunction(t.getter)?t.getter(s):s}),this.prop=e},defineProperty:function(){return{}},initView:util.noop,initEnd:util.noop,initEvent:util.noop,registerMessage:util.noop}),KG.Class.define("HeadingNav",{ParentClass:"BaseComponent",getTemplate:function(){return['<nav class="kg-header-nav-comp">','<div class="container">','<a href="../mybiz/index.html" class="nav js_mybiz">我的店铺</a>','<a href="../myfav/list.html" class="nav js_myfav">我的收藏</a>','<a href="../mycoupon/list.html" class="nav js_mycoupon">我的优惠</a>','<a href="../mysys/index.html" class="nav js_mysys">系统消息</a>','<a href="../mycount/info.html" class="nav js_mycount">账户</a>',"</div>","</nav>"].join("")},getData:function(t,e,i){var a=KG.data.get("page").split("-");a=a[0]||"",i({page:a})},initEnd:function(){var t=this.data.page;this.elem.find(".js_"+t).addClass("active")}}),KG.Class.define("MybizLeftUserNav",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-MybizLeftUserNav">','<a class="hw-img" href=""><img src="{{user.image}}" /></a>','<span class="hw-email">{{user.email}}</span>','<a href="index.html" class="hw-a js_index" style="margin-top: 24px;">我的店铺</a>','<a href="coupon.html" class="hw-a js_coupon">店铺优惠</a>','<a href="article.html" class="hw-a js_article">店铺文章</a>',"</div>"].join("")},getData:function(t,e,i){var a=KG.user.get(),s=KG.data.get("page").split("-");s=s[1]||"",i({user:a,page:s})},initEnd:function(){var t=this.data.page;this.elem.find(".js_"+t).addClass("active")}}),KG.Class.define("MybizRightStoreRank",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-MybizRightStoreRank">',"<span>您的店铺吸引力</span>","<b>{{range}}%</b>",'<div class="range"><em style="width:{{range}}%;"></em></div>',"<p>如何创建有影响力的店铺？</p>",'<a style="margin-top: 20px;" href="">完善店铺信息增加认知度</a>','<a href="">更多精美图片增加可信度</a>','<a href="">多发文章增加专业度</a>','<a href="">常发活动增加活跃度</a>',"</div>"].join("")},getData:function(t,e,i){var a=this.prop.range;i({range:a})},defineProperty:function(){return{range:{defaultValue:0}}}}),KG.Class.define("MybizRunningStoreList",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-comp-store-list">',"{{each list as item}}",'<div class="hw-each">','<img class="hw-img" src="{{item.logo | absImage}}" />',"<h4>{{item.name_cn}}</h4>","<p>{{item.address}}, {{item.city}}, {{item.state}}, {{item.zip}}</p>","<em>{{item.commentnum}}条新评论</em>",'<div class="r">','<a class="hw-a" href="">管理店铺</a>','<a class="hw-a" href="">分享</a>',"</div>","</div>","{{/each}}","</div>"].join("")},getData:function(t,e,i){KG.request.getBizList({},function(t,e){t&&i({list:e})})}}),KG.Class.define("MybizStopStoreList",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-comp-store-list">',"{{each list as item}}",'<div class="hw-each">','<img class="hw-img" src="{{item.logo | absImage}}" />',"<h4>{{item.name_cn}}</h4>","<p>{{item.address}}, {{item.city}}, {{item.state}}, {{item.zip}}</p>","<em>{{item.commentnum}}条新评论</em>",'<div class="r">','<a class="hw-a js_restart" href="javascript:void(0)">重新营业</a>','<a class="hw-a" href="">删除</a>',"</div>","</div>","{{/each}}","</div>"].join("")},getData:function(t,e,i){KG.request.getBizList({},function(t,e){t&&i({list:e})})},initEvent:function(){this.elem.find(".js_restart").click(function(){util.dialog.show()})}}),KG.Class.define("MybizRunningCouponList",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-comp-store-list">',"{{each list as item}}",'<div class="hw-each">','<img class="hw-img" src="{{item.logo | absImage}}" />','<h4 style="margin-top: 20px;">{{item.title}}</h4>','<p style="color: #9b9b9b;font-size: 14px;margin-top:15px;">{{item.count}}人已经领取</p>','<div class="r">','<a class="hw-a" href="">管理优惠</a>','<a class="hw-a" href="">分享</a>',"</div>","</div>","{{/each}}","</div>"].join("")},getData:function(t,e,i){KG.request.getBizCouponList({},function(t,e){t&&i({list:e})})}}),KG.Class.define("MybizStopCouponList",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-comp-store-list">',"{{each list as item}}",'<div class="hw-each">','<img class="hw-img" src="{{item.logo | absImage}}" />','<h4 style="margin-top: 10px;">{{item.title}}</h4>','<p style="color: #9b9b9b;font-size: 14px;margin-top:10px;">{{item.count}}人已经领取</p>','<p style="color: #9b9b9b;font-size: 14px;margin-top:5px;">{{item.startTime | formatDate}} 至 {{item.endTime | formatDate}}</p>','<div class="r">','<a class="hw-a" style="margin-top: 30px;" href="">删除</a>',"</div>","</div>","{{/each}}","</div>"].join("")},getData:function(t,e,i){KG.request.getBizCouponList({},function(t,e){t&&i({list:e})})}}),KG.Class.define("MybizCreateNewStore",{ParentClass:"BaseComponent",getTemplate:function(){var t={store:["添加新店铺","store_default.png",""],coupon:["添加新优惠","coupon_default.png",""],article:["添加新文章","article_default.png","createArticle.html"]},e=this.box.data("type");return['<a class="hw-MybizCreateNewStore" href="'+t[e][2]+'">','<div class="hw-img '+e+'"><img src="../../image/'+t[e][1]+'" /></div>','<i class="icon">＋</i>',"<b>",t[e][0],"</b>","</a>"].join("")},initEvent:function(){}}),KG.Class.define("MybizArticleList",{ParentClass:"BaseComponent",getTemplate:function(){return["<div>",'<div class="panel-heading">',"<b>文章 ({{list.length}})</b>","</div>",'<div class="hw-comp-store-list panel-body">',"{{each list as item}}",'<div class="hw-each">','<img class="hw-img" src="{{item.logo | absImage}}" />','<h4 style="margin-top:20px;">{{item.title}}</h4>','<p style="color: #9b9b9b;font-size: 14px;margin-top:20px;">发表于{{item.startTime | formatDate}}</p>','<div class="r">','<a class="hw-a" href="editArticle.html?id={{item.id}}">编辑</a>','<a class="hw-a" href="">分享</a>',"</div>","</div>","{{/each}}","</div>","</div>"].join("")},getData:function(t,e,i){KG.request.getBizCouponList({},function(t,e){t&&i({list:e})})}}),KG.Class.define("BackPageLink",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="container hw-comp-BackPageLink">','<a href="{{href}}"><i class="icon fa fa-angle-left"></i>{{title}}</a>',"</div>"].join("")},getData:function(t,e,i){i({title:t.data("title"),href:t.data("href")})}})}(),KG.component={initEach:function(t,e,i){i=i||{},new(KG.Class.getByName(t))(e,i)},init:function(t){t=t||$("body");var e=t.find("[role]");e.each(function(){var t=$(this);if(!t.attr("init-end")&&!t.attr("init-self")){var e=t.attr("role");KG.component.initEach(e,t,{})}})},getObj:function(t){var e=t.data("kg-obj");return e||null}},$(function(){KG.component.init()});
"use strict";!function(){KG.Class.define("BaseForm",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="container hw-comp-bform">',this.getInsideTemplate(),"</div>"].join("")},getInsideTemplate:function(){}}),KG.Class.define("BaseInput",{ParentClass:"BaseComponent",defineProperty:function(){return{value:{defaultValue:""},label:{},require:{},type:{defaultValue:"text"}}},getTemplate:function(){return['<div class="form-group hw-comp-BaseInput">','<label class="lab {{if require}}require{{/if}}" for="{{uuid}}">{{label}}</label>','<label class="control-label hw-err"></label>','<input type="{{type}}" class="form-control" id="{{uuid}}" placeholder="{{placeholder}}">',"</div>"].join("")},getData:function(e,t,i){var l=this.prop;i({value:l.value,label:l.label,require:l.require,type:l.type,placeholder:e.attr("placeholder")||"",uuid:"lb_"+util.getUuid()})},getValue:function(){return this.elem.find("input").val()},showError:function(e){e?(this.elem.addClass("has-error"),this.elem.find(".hw-err").html(e)):(this.elem.removeClass("has-error"),this.elem.find(".hw-err").html(""))},reset:function(){this.elem.find("input").val(""),this.showError(!1)}}),KG.Class.define("MybizArticleForm",{ParentClass:"BaseForm",getInsideTemplate:function(){return["{{if pageTitle}}<h3>{{pageTitle}}<h3>{{/if}}",'<div class="form-group">','<label class="require">将文章发布到</label>','<div class="dropdown">','<button class="hw-drop" id="dl_aaa" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">','<input type="text" readonly="true" class="form-control js_biz" >','<i class="icon fa fa-caret-down"></i>',"</button>",'<ul class="dropdown-menu" aria-labelledby="dl_aaa">',"{{each bizList as item}}",'<li class="js_drop">{{item.name_cn}}, {{item | storeFullAddress}}</li>',"{{/each}}","</ul>","</div>","</div>",'<div class="form-group">','<label class="require" for="lb_bbb">文章标题</label>','<input type="email" class="form-control" id="lb_bbb" placeholder="e.g. 海底捞成功的秘密">',"</div>",'<div class="form-group">','<label class="require" for="lb_ccc">文章正文</label>','<textarea class="form-control" id="lb_ccc"></textarea>',"</div>",'<a href="javascript:void(0)" class="hw-btn hw-blue-btn">发表</a>'].join("")},defineProperty:function(){return{title:{defaultValue:""},type:{defaultValue:"create"}}},getData:function(e,t,i){var l=this.prop.title,a=this.prop.type,r=function(){return KG.request.getBizList({})},n=[r];"edit"===a&&n.push(function(){return KG.request.getBizCouponList({})}),KG.request.defer(n,function(e){i({pageTitle:l,bizList:e})})},initEvent:function(){var e=this.elem.find(".js_biz");this.elem.find(".js_drop").click(function(){e.val($(this).text())})},initEnd:function(){CKEDITOR.replace("lb_ccc")}}),KG.Class.define("BaseUploadImage",{ParentClass:"BaseComponent",setJqVar:function(){return{img:this.elem.find(".js_img"),btn:this.elem.find(".js_btn"),fileInput:this.elem.find('input[type="file"]')}},defineProperty:function(){return{image:{}}},initEvent:function(){var e=this.jq.btn,t=this.jq.img;this.jq.fileInput.bind("change",function(i){var l=this.files[0];e.button("loading"),util.uploadImage(l,function(i){var i=KG.config.SiteRoot+i;t.attr("src",i),e.button("reset")})})}})}();
"use strict";!function(){KG.Class.define("StarRank",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-comp-star">',"{{each list as item}}",'{{if item==="full"}}','<i class="icon fa fa-star"></i>','{{else if item==="half"}}','<i class="icon fa fa-star-half-o"></i>',"{{else}}",'<i class="icon fa fa-star-o"></i>',"{{/if}}","{{/each}}","</div>"].join("")},getData:function(a,s,e){for(var i=parseFloat(a.data("rank")),t=[],n=1;6>n;n++)i>n?t.push("full"):n===i?t.push("full"):n===i+.5?t.push("half"):t.push("empty");e({list:t})}}),KG.Class.define("MyfavLeftUserNav",{ParentClass:"BaseComponent",getTemplate:function(){return['<div style="height: 200px;" class="hw-MybizLeftUserNav">','<a class="hw-img" href=""><img src="{{user.image}}" /></a>','<span class="hw-email">{{user.email}}</span>','<a href="javascript:void(0)" class="hw-a js_{{page}}" style="margin-top: 24px;">{{dir}}</a>',"</div>"].join("")},getData:function(a,s,e){var i=KG.user.get(),t=KG.data.get("page").split("-"),n=t[0];t=t[1]||"",n={myfav:"收藏店铺",mycoupon:"我的优惠",mysys:"系统消息"}[n],e({user:i,page:t,dir:n})},initEnd:function(){var a=this.data.page;this.elem.find(".js_"+a).addClass("active")}}),KG.Class.define("RightPanelList_1",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="panel hw-panel hw-comp-RightPanelList-1" style="width: 844px;float: right;">','<div class="panel-heading">',this.getHeadingTemplate(),"</div>",'<div class="hw-comp-store-list hw-right-panel-list panel-body">',this.getBodyTemplate(),"</div>","</div>"].join("")},getHeadingTemplate:function(){},getBodyTemplate:function(){}}),KG.Class.define("MyfavList",{ParentClass:"RightPanelList_1",getHeadingTemplate:function(){return['<div class="dropdown hw-drop">','<button id="dp_aaa" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">','<input type="text" readonly="true" class="form-control js_type" >','<i class="icon fa fa-caret-down"></i>',"</button>",'<ul class="dropdown-menu" aria-labelledby="dp_aaa">','<li class="js_a">全部收藏店铺</li>','<li class="js_a">正在优惠店铺</li>','<li class="js_a">暂停营业店铺</li>',"</ul>","</div>"].join("")},getBodyTemplate:function(){return["{{each list as item}}",'<div class="hw-each">','<img class="hw-img" src="{{item.logo | absImage}}" />','<div class="mask">暂停营业</div>','<div class="h4">',"<b>{{item.name_cn}}</b>",'<i class="icon icon-v">v</i>','<i class="icon icon-coupon"></i>','<span class="cpt">全场满100送代金券</span>',"</div>",'<div style="margin-top: 0;" role="StarRank" data-rank="3.5"></div>','<span style="margin-left: 10px;font-size: 14px;">{{item.commentnum}}条评论</span>','<p style="font-size: 14px;margin-top:8px;">地址 : {{item | storeFullAddress}} &nbsp;&nbsp; 电话 : {{item.tel}}</p>','<div class="r">','<b class="hw-a" style="margin-top: 18px;">分享</b>','<b class="hw-a">评论</b>','<b class="hw-a">取消收藏</b>',"</div>","</div>","{{/each}}"].join("")},getData:function(a,s,e){KG.request.getBizList({},function(a,s){e({list:s})})},initEvent:function(){var a=this.elem.find(".js_type");this.elem.find(".js_a").click(function(){var s=$(this);a.val(s.text())})},initEnd:function(){this.elem.find(".js_a").eq(0).trigger("click"),KG.component.init(this.elem)}})}();
"use strict";!function(){KG.Class.define("MycouponList",{ParentClass:"RightPanelList_1",getHeadingTemplate:function(){return['<div class="dropdown hw-drop">','<button id="dp_aaa" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">','<input type="text" readonly="true" class="form-control js_type" >','<i class="icon fa fa-caret-down"></i>',"</button>",'<ul class="dropdown-menu" aria-labelledby="dp_aaa">','<li class="js_a">全部优惠（0）</li>','<li class="js_a">正在优惠（0）</li>','<li class="js_a">过期优惠（0）</li>',"</ul>","</div>"].join("")},getBodyTemplate:function(){return["{{each list as item}}",'<div class="hw-each">','<img class="hw-img" src="{{item.logo | absImage}}" />',"{{if item.stop}}",'<div class="mask">已过期</div>',"{{/if}}",'<div style="margin-top: 10px;" class="h4">',"<b>{{item.title}}</b>","</div>",'<p style="font-size: 16px;margin-top:20px;">{{item.startTime | formatDate}} 至 {{item.endTime | formatDate}}</p>','<div class="r">',"{{if item.stop}}",'<b class="hw-a" style="margin-top: 48px;">删除</b>',"{{else}}",'<b class="hw-a" style="margin-top: 18px;">发送短信至手机</b>','<b class="hw-a">分享</b>','<b class="hw-a">删除</b>',"{{/if}}","</div>","</div>","{{/each}}"].join("")},getData:function(t,i,a){KG.request.getBizCouponList({},function(t,i){a({list:i})})},initEvent:function(){var t=this.elem.find(".js_type");this.elem.find(".js_a").click(function(){var i=$(this);t.val(i.text())})},initEnd:function(){this.elem.find(".js_a").eq(0).trigger("click"),KG.component.init(this.elem)}})}();
"use strict";!function(){KG.Class.define("MysysMessageList",{ParentClass:"RightPanelList_1",getHeadingTemplate:function(){return['<div class="dropdown hw-drop">','<button id="dp_aaa" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">','<input type="text" readonly="true" class="form-control js_type" >','<i class="icon fa fa-caret-down"></i>',"</button>",'<ul class="dropdown-menu" aria-labelledby="dp_aaa">','<li class="js_a">全部系统消息</li>',"</ul>","</div>"].join("")},getBodyTemplate:function(){return['<div class="hw-each">','<div class="h4">','<label style="margin-left: 0;" class="hw-u" for="ck_aaa">全选</label>',"</div>",'<div class="r">','<b class="hw-a">删除</b>',"</div>","</div>","{{each list as item}}",'<div class="hw-each">','<div class="h4">','<input type="checkbox" value="">','<a target="_blank" href="messageDetail.html?id={{item.id}}" class="hw-u">{{item.fromUser}}</a>','<a target="_blank" href="messageDetail.html?id={{item.id}}" class="hw-p">{{item.title}}</a>',"</div>",'<div class="r">','<b class="hw-a">删除</b>',"</div>","</div>","{{/each}}",'<div class="hw-each">','<div class="h4">','<label style="margin-left: 0;" class="hw-u" for="ck_bbb">全选</label>',"</div>",'<div class="r">','<b class="hw-a">删除</b>',"</div>","</div>"].join("")},getData:function(t,a,e){KG.request.getSystemMessageList({},function(t,a){e({list:a})})},initEvent:function(){var t=this.elem.find(".js_type");this.elem.find(".js_a").click(function(){var a=$(this);t.val(a.text())})},initEnd:function(){this.elem.find(".js_a").eq(0).trigger("click")}}),KG.Class.define("MycountMessageDetail",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-comp-MycountMessageDetail">',"<h4>{{data.title}}</h4>","<small>{{data.createTime | formatDate}}</small>","<p>{{data.msgbody}}</p>",'<div class="hw-ft">','<button style="margin-left: 25px;" class="hw-btn hw-blue-btn">返回</button>','<button class="hw-btn hw-light-btn">删除</button>',"</div>","</div>"].join("")},defineProperty:function(){return{msgId:{defaultValue:""}}},getData:function(t,a,e){var s=this.prop.msgId||KG.data.get("msgId");KG.request.getSystemMessageDetail({id:s},function(t,a){t&&e({data:a})})}})}();
"use strict";!function(){KG.Class.define("MycountLeftNav",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-comp-MycountLeftNav">','<a class="hw-a js_info" href="info.html">基本信息</a>','<a class="hw-a js_password" href="password.html">修改密码</a>',"</div>"].join("")},getData:function(t,e,a){var i=KG.data.get("page").split("-")[1];a({page:i})},initEnd:function(){this.elem.find(".js_"+this.data.page).addClass("active")}}),KG.Class.define("MycountChangePasswordForm",{ParentClass:"BaseComponent",getTemplate:function(){return["<div>",'<div class="js_old" data-label="旧密码" data-require="true" data-type="password" role="BaseInput"></div>','<div class="js_pwd" data-label="新密码" data-require="true" data-type="password" role="BaseInput"></div>','<div class="js_pwd2" data-label="确认新密码" data-require="true" data-type="password" role="BaseInput"></div>','<a style="margin-top: 20px;float: right;" href="javascript:void(0)" class="hw-btn hw-blue-btn">保存</a>',"</div>"].join("")},initEvent:function(){this.elem.find(".hw-btn").click(this.submit.bind(this))},setJqVar:function(){return{oldObj:KG.component.getObj(this.elem.find(".js_old")),pwdObj:KG.component.getObj(this.elem.find(".js_pwd")),pwd2Obj:KG.component.getObj(this.elem.find(".js_pwd2"))}},submit:function(){var t=this.jq.oldObj,e=this.jq.pwdObj,a=this.jq.pwd2Obj,i=t.getValue(),s=e.getValue(),n=a.getValue();return i?s?s!==n?void a.showError("二次输入的密码不一致"):(util.alert(i+s+n),void this.reset()):void e.showError("请输入新密码"):void t.showError("请输入旧密码")},reset:function(){var t=this.jq.oldObj,e=this.jq.pwdObj,a=this.jq.pwd2Obj;t.reset(),e.reset(),a.reset()}}),KG.Class.define("UploadUserImage",{ParentClass:"BaseUploadImage",getTemplate:function(){return["<div>",'<div class="hw-img-box">','<img class="js_img" src="{{image}}" />','<b class="js_del">删除</b>',"</div>",'<button data-loading-text="正在上传..." class="hw-btn js_btn">从电脑上传图片</button>','<input type="file" />',"</div>"].join("")},getData:function(t,e,a){a({image:this.prop.image})},setJqVar:function(){return{delBtn:this.elem.find(".js_del")}},initEvent:function(){this.callParent("initEvent");var t=this.elem.find(".js_del");this.elem.find(".hw-img-box").hover(function(){t.slideDown(200)},function(){t.slideUp(200)});var e=this.jq;e.delBtn.click(function(){e.img.attr("src",KG.user.get("defaultImage"))})}}),KG.Class.define("SelectLocationRange",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-comp-SelectLocationRange">','<select class="js_country">',"{{each countryList as item}}",'<option value="{{item.id}}" {{if item.id==region[0]}}selected="true"{{/if}}>{{item.name}}</option>',"{{/each}}","</select>",'<select class="js_state"></select>',"<br />",'<select style="display: none;" class="js_city"></select>','<select style="display: none;" class="js_area"></select>',"</div>"].join("")},defineProperty:function(){return{region:{defaultValue:"1,-1,-1,-1"}}},setJqVar:function(){return{country:this.elem.find(".js_country"),state:this.elem.find(".js_state"),city:this.elem.find(".js_city"),area:this.elem.find(".js_area")}},getData:function(t,e,a){var i=this;KG.request.getAllAddressAreaInfo({},function(t,e){var s=i.getListData(e),n={},l=function(t){util.each(t,function(t){n[t.pk_id]=t,t.child&&l(t.child)})};l(e);var r=i.prop.region.split(",");a({countryList:s,all:n,region:r})})},initEventEnd:function(){var t=this;this.jq.country.change(function(){var e=$(this).val();t.changeCountry(e)}),this.jq.state.change(function(){var e=$(this).val();t.changeState(e)}),this.jq.city.change(function(){var e=$(this).val();t.changeCity(e)})},changeCountry:function(t,e){if("-1"===t)return this.jq.state.val("-1"),this.jq.city.val("-1").hide(),void this.jq.area.val("-1").hide();var a=this.getListData(this.data.all[t].child);this.setListHtml(a,this.jq.state,e)},changeState:function(t,e){if("-1"===t)return this.jq.city.val("-1").hide(),void this.jq.area.val("-1").hide();var a=this.getListData(this.data.all[t].child);this.setListHtml(a,this.jq.city,e)},changeCity:function(t,e){if("-1"===t)return void this.jq.area.val("-1").hide();var a=this.getListData(this.data.all[t].child);this.setListHtml(a,this.jq.area,e)},getListData:function(t){return util.map(t,function(t){return t.id=t.pk_id,t})},setListHtml:function(t,e,a){if(!t||t.length<1)return void e.hide();var i=['<option value="-1">请选择</option>',"{{each data as item}}",'<option value="{{item.id}}">{{item.name}}</option>',"{{/each}}"].join("");e.html(template.compile(i)({data:t})),a=a||"-1",e.show().find('[value="'+a+'"]').attr("selected",!0),e.trigger("change")},getValue:function(){var t,e=[this.jq.country.val(),this.jq.state.val(),this.jq.city.val(),this.jq.area.val()];return util.each(e,function(e){e&&"-1"!==e&&(t=e)}),t},initEnd:function(){var t=this.data.region,e=t[0],a=t[1],i=t[2],s=t[3];this.changeCountry(e,a),this.changeState(a,i),this.changeCity(i,s),this.initEventEnd()}}),KG.Class.define("MycountChangeInfoForm",{ParentClass:"BaseComponent",getTemplate:function(){return["<div>",'<div class="js_username" data-label="用户名" data-require="true" role="BaseInput"></div>','<div class="js_regemial" data-label="注册邮箱" data-require="true" data-type="email" role="BaseInput"></div>','<div class="form-group">','<label class="lab">头像</label>','<div data-image="{{user.image | defaultUserImage}}" class="hw-upload" role="UploadUserImage"></div>',"</div>",'<div class="hw-line"></div>','<div class="form-group">','<label class="lab require">所在地区</label>','<div class="js_loc" data-region="{{region}}" role="SelectLocationRange"></div>',"</div>",'<div class="js_phone" data-label="联络电话" role="BaseInput"></div>','<div class="js_wx" data-label="微信号" role="BaseInput"></div>','<div class="hw-line"></div>','<div class="form-group">','<label class="lab">个人介绍</label>','<textarea class="form-control hw-area js_desc"></textarea>',"</div>",'<a style="margin-top: 20px;float: right;" href="javascript:void(0)" class="js_btn hw-btn hw-blue-btn">保存</a>',"</div>"].join("")},setJqVar:function(){return{btn:this.elem.find(".js_btn")}},getData:function(t,e,a){KG.request.getUserDetailInfo({},function(t,e){for(var i=[],s=e.region_tree,n=3;n>-1;n--)i.push(s[n]?s[n].pk_id:"-1");a({region:i.join(","),user:KG.user.get()})})},initEvent:function(){this.jq.btn.click(this.submit.bind(this))},submit:function(){var t=KG.component.getObj(this.elem.find(".js_loc"));alert(t.getValue())}})}();