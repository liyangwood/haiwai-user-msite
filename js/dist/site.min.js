"use strict";(function(){this.KG&&(this._KG=KG),this.KG={}}).call(window),function(){var i="http://beta.haiwai.com";KG.config={root:"/haiwai-user-msite",SiteRoot:i,ApiRoot:i+"/service/api/"},KG.Const={};var t={image:KG.config.root+"/image/user_default.png",defaultImage:KG.config.root+"/image/user_default.png",email:"haiwai@chinagate.com",userid:10051,token:"7e68db968c5e8e36872770b0bdcf342f",isLogin:!0};KG.user={get:function(i){return i?t[i]:t}};var e={};KG.data={get:function(i){return i?e[i]:e},add:function(i){util.extend(e,i||{})}}}();
!function(){function t(t){return a[t]||null}function e(){return"IObject.random-"+i++}"function"!=typeof Object.create&&(Object.create=function(t){var e=function(){};return e.prototype=t,new e});var n={extend:function(t,e){return e=e||!1,$.extend(e,this,t),this},proxy:function(t,e){return $.isArray(e)||(e=Array.prototype.slice.call(arguments,1)),t.apply(this,e)},call:function(t,e,n){return $.isArray(n)||(n=Array.prototype.slice.call(arguments,2)),e.apply(t,n)},getParent:function(t){var e=this.__base,n=this.__name;if(!t&&!n)return e;for(;e;){if(t&&e.__name===t)return e;if(n!==e.__name)return e;e=e.__base}return e},callParent:function(t,e,n){"string"!=typeof e&&(n=e,e=null);var r,a,i=null;return r=e?this.getParent(e):this.__base||this,r&&(a=r.fn[t],i=a.apply(this,n)),i}},r=function(t,e){return $.extend(t,e)},a={},i=0,o=function(i,o){var s=arguments;"string"!=typeof i?(o=s[0],i=e()):t(i)&&alert(i+" is already exist");var c=null;if(o.ParentClass&&(c=o.ParentClass,delete o.ParentClass),c&&"string"==typeof c&&(c=t(c),!c))throw console.log(o,i),o.ParentClass+" is not exist";var u=function(){this._init&&this._init.apply(this,arguments)};return o.Static&&(u._static=o.Static,delete o.Static),c?(u.prototype=Object.create(c.prototype||c),u.prototype.__base=c,u.prototype.constructor=u,u.prototype.__static=u._static):u.prototype.fn=o,u.fn=u.prototype,$.extend(u.fn,n),o&&r(u.fn,o),u.fn.__type="IObject",u.fn.__name=i,a[i]=u,u},s={define:o,getByName:t,getAll:function(){return a}};KG.Class=s}();
"use strict";!function(){var e=1,t={};_.extend(t,_),t.extend(t,{addUserIdToRequestData:function(e){return e=e||{},e.userid=KG.user.get("userid"),e.token=KG.user.get("token"),e},formatDate:function(e,t){function o(e){return 10>e?"0"+e:e}10===e.toString().length&&(e=1e3*parseInt(e));var i=new Date(e),a=i.getFullYear(),n=o(i.getMonth()+1),s=o(i.getDate()),l=o(i.getHours()),d=o(i.getMinutes()),r=o(i.getSeconds());return t.replace("yy",a).replace("mm",n).replace("dd",s).replace("h",l).replace("m",d).replace("s",r)},getUuid:function(){return"uuid_"+e++},uploadImage:function(e,t){if(e){var o=new FileReader;o.onload=function(e){var o=e.target.result;KG.request.uploadImage({image:o},function(e,o){e&&t(o.files[0])})},o.readAsDataURL(e)}},getQrCode:function(e,t){return t=t||240,"https://api.qrserver.com/v1/create-qr-code/?size="+t+"x"+t+"&data="+encodeURIComponent(e)}});var o={};t.message={register:function(e,t){var i=function(i,a){a=o[e]?o[e].data:a,t(i,a)};if($("body").unbind(e).bind(e,i),o[e]){var a=o[e];t(null,a.data)}},publish:function(e,t){o[e]={data:t},$("body").trigger(e,t)}},t.dialog={init:function(){var e=['<div class="modal fade" id="kg_modal_dialog" tabindex="-1" role="dialog">','<div class="modal-dialog" role="document">','<div class="modal-content box">',"</div>","</div>","</div>"].join("");e=$(e),e.on("hidden.bs.modal",function(){var t=e.find(".box");t.find(".js_yes").unbind("click"),t.empty()}),e.appendTo("body")},get:function(e){$("#kg_modal_dialog").length<1&&t.dialog.init();var o=$("#kg_modal_dialog");if(!e)return o;var i=t.extend({title:"信息提示",body:"点击确认，我们将为您删除这个店铺的所有信息，包括基本信息，图片，店铺评级和评论等，并且不能再找回这些信息，请谨慎操作。",foot:!0,type:"confirm",YesText:"确认",YesFn:t.noop,NoText:"取消",end:null},e),a=['{{if type!=="toast"}}','<div class="modal-header">','<button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="fa fa-times"></i></button>',"</div>","{{/if}}",'<div class="modal-body">',"{{if title}}",'<h4 class="hw-title">{{title}}</h4>',"{{/if}}",'{{if body}}<div class="hw-body">{{#body}}</div>{{/if}}',"</div>","{{if foot}}",'<div class="modal-footer">','<button type="button" class="hw-btn hw-light-btn" data-dismiss="modal">{{NoText}}</button>','{{if YesText}}<button type="button" class="hw-btn hw-blue-btn js_yes">{{YesText}}</button>{{/if}}',"</div>","{{/if}}"].join("");return a=template.compile(a)(i),o.find(".box").html(a),o.find(".js_yes").click(function(e){i.YesFn(function(){t.dialog.hide()},e)}),o.attr("class","modal fade"),e["class"]&&o.addClass(e["class"]),o},show:function(e){var o=t.dialog.get(e);e.beforeShowFn&&e.beforeShowFn.call(o),o.modal()},hide:function(){var e=t.dialog.get();e.modal("hide")},showFocusImage:function(e,o){var i=['<div id="cb_cccc" class="carousel slide" data-ride="carousel">','<ol class="carousel-indicators">',"{{each list}}",'<li data-target="#cb_cccc" data-slide-to="{{$index}}" class="{{if index==$index}}active{{/if}}"></li>',"{{/each}}","</ol>",'<div class="carousel-inner" role="listbox">',"{{each list as url}}",'<div class="item {{if index==$index}}active{{/if}}">','<img src="{{url}}">',"</div>","{{/each}}","</div>",'<a class="left carousel-control" href="#cb_cccc" role="button" data-slide="prev">','<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>','<span class="sr-only">Previous</span>',"</a>",'<a class="right carousel-control" href="#cb_cccc" role="button" data-slide="next">','<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>','<span class="sr-only">Next</span>',"</a>","</div>"].join("");i=template.compile(i)({list:o,index:e}),t.dialog.show({body:i,foot:!1,"class":"hw-carousel",title:""})},confirm:function(e){var o={title:e.msg,body:!1,NoText:"取消",YesText:e.YesText||"确认","class":"hw-confirm",YesFn:e.YesFn};e.title&&(o.title=e.title,o.body=e.msg),t.dialog.show(o)},confirm1:function(e){var o={title:e.msg,body:!1,NoText:"取消",YesText:e.YesText||"确认","class":"hw-confirm1",YesFn:e.YesFn};t.dialog.show(o)},showQrCode:function(e){var o='<div class="hw-qr"><img src="'+t.getQrCode(e,200)+'" /></div>';t.dialog.show({body:o,title:"打开微信扫一扫以下二维码即可打开本店页面，点击屏幕右上角分享按钮",foot:!1,"class":"hw-dialog-qrcode"})},showLoginBox:function(e){var o={foot:!1,"class":"hw-dialog-login",body:'<div class="js_role" role="HWLoginRegBoxComp" data-type="login"></div>',beforeShowFn:function(){var e=this;KG.component.initWithElement(e.find(".js_role"))}};t.dialog.show(o)},showRegBox:function(e){var o={foot:!1,"class":"hw-dialog-login",body:'<div class="js_role" role="HWLoginRegBoxComp" data-type="reg"></div>',beforeShowFn:function(){var e=this;KG.component.initWithElement(e.find(".js_role"))}};t.dialog.show(o)}},t.alert=function(e){t.dialog.show({body:e,NoText:"确定",YesText:!1})},t.url={param:function(e,t){t=t||location.search,e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=o.exec(t);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}},window.util=KG.util=t}(),function(){template.helper("absImage",function(e){return/^http/.test(e)?e:KG.config.SiteRoot+e}),template.helper("formatDate",function(e,t){return util.formatDate(e,t||"yy年mm月dd日 h:m:s")}),template.helper("storeFullAddress",function(e){return e.address+", "+e.city+", "+e.state+" "+e.zip}),template.helper("defaultUserImage",function(e){return e?e:KG.user.get("defaultImage")}),template.helper("decode",function(e){return decodeURIComponent(e)})}();
KG.request={ajax:function(e,t,a){var i=KG.config.ApiRoot+"?format=json",n=e.method||"get";delete e.method;var o=$.Deferred();return e.url&&(i+="&"+e.url,delete e.url),$.ajax({type:n,url:i,data:e,dataType:"json",success:function(e){t&&t.call(null,!!e.status,e["return"]),o.resolve(e["return"])},error:function(e){a&&a(e),o.reject(e)}}),o},defer:function(e,t,a){var i=[];util.each(e,function(e){i.push(e())}),$.when.apply($,i).then(t,a)},mockData:function(e,t,a){var i=$.Deferred();return util.delay(function(){t&&t(!0,e),i.resolve(e)},500),i},getBizList:function(e,t,a){var i={func:"biz",userid:KG.user.get("userid"),detail:1,token:KG.user.get("token")};return this.ajax(i,t,a)},getBizDetailById:function(e,t,a){var i={func:"biz",act:"view",bizid:e.bizId,userid:KG.user.get("userid"),token:KG.user.get("token")};return this.ajax(i,t,a)},getBizCouponList:function(e,t,a){var i=[{id:123,logo:"/images/165/118/upload/classifiedinfo/19/f9/05/19f905692cf998e30745e31e9f3d28e9.jpg",title:"全场满100元送午餐券",count:100,bizInfo:{name:"小肥羊Fremont店",address:"Fremont, CA 98765"},stop:!0,startTime:1449772731230,endTime:1449772831230},{id:234,logo:"/images/165/118/upload/classifiedinfo/19/f9/05/19f905692cf998e30745e31e9f3d28e9.jpg",title:"全场满100元送午餐券",count:100,bizInfo:{name:"小肥羊Fremont店",address:"Fremont, CA 98765"},startTime:1449772731230,endTime:1449772831230}];return this.mockData(i,t,a)},getStoreBigBgImageList:function(e,t,a){var i=[{url:"http://www.sinomedianet.com/haiwai2015.3.19/images/city-pic/sf.jpg"},{url:"http://www.sinomedianet.com/haiwai2015.3.19/images/city-pic/sf.jpg"},{url:"http://www.sinomedianet.com/haiwai2015.3.19/images/city-pic/sf.jpg"}];return this.mockData(i,t,a)},getSystemMessageList:function(e,t,a){var i={func:"sysmsg"};return util.addUserIdToRequestData(i),console.log(i),this.ajax(i,t,a)},getSystemMessageDetail:function(e,t,a){var i={func:"sysmsg",act:"view",id:e.id};return util.addUserIdToRequestData(i),this.ajax(i,t,a)},deleteSystemMessageById:function(e,t,a){var i={func:"sysmsg",act:"delete",id:e.id};return util.addUserIdToRequestData(i),this.ajax(i,t,a)},uploadImage:function(e,t,a){var i={url:"func=article&act=upload",method:"post",type:"image","uploadfield[]":e.image};return this.ajax(i,t,a)},getAllAddressAreaInfo:function(e,t,a){var i={func:"biz",act:"get_allregion"};return this.ajax(i,t,a)},getUserDetailInfo:function(e,t,a){var i={act:"getuser",check:"0aedbf673e0c9bd37540b75a46af5a12",func:"passport",userid:15623};return this.ajax(i,function(e,a){t(!0,a[15623])},a)},getAllStoreCategoryList:function(e,t,a){var i={func:"biz",act:"tags"};return this.ajax(i,t,a)},getAllStoreTagByCategory:function(e,t,a){var i={func:"biz",act:"taglist",biztagid:e.catId};return this.ajax(i,t,a)},getMyfavStoreList:function(e,t,a){var i={func:"biz",act:"bookmark"};return util.addUserIdToRequestData(i),this.ajax(i,t,a)},getMycouponList:function(e,t,a){var i={func:"event",act:"bookmark"};return util.addUserIdToRequestData(i),this.ajax(i,t,a)},getSiteArticleList:function(e,t,a){var i=[{id:1,title:"盘点旧金山里那些文艺范儿的店",image:"http://www.haiwai.com/images/750/438/upload/classifiedinfo/e3/53/03/e35303ef3c6a5477ef7dcd6f6698554c.jpg",description:"盘点旧金山里那些文艺范儿的店正文盘点旧金山里那些文艺范儿的店正文盘点旧金山里那些文艺范儿的店正文盘点旧金山里那些文艺范儿的店正文",dateline:Date.now(),bizInfo:{name:"沸腾渔乡",address:"290 Barber Ct, Milpitas, CA 95035",logo:"http://www.haiwai.com/upload/biz/9d/10/5f/9d105fef7bb81eb57103915d800b7bf7.jpg"},view:3002212},{id:1,title:"盘点旧金山里那些文艺范儿的店",image:"http://www.haiwai.com/images/750/438/upload/classifiedinfo/e3/53/03/e35303ef3c6a5477ef7dcd6f6698554c.jpg",description:"盘点旧金山里那些文艺范儿的店正文盘点旧金山里那些文艺范儿的店正文盘点旧金山里那些文艺范儿的店正文盘点旧金山里那些文艺范儿的店正文",dateline:Date.now(),bizInfo:{name:"沸腾渔乡",address:"290 Barber Ct, Milpitas, CA 95035",logo:"http://www.haiwai.com/upload/biz/9d/10/5f/9d105fef7bb81eb57103915d800b7bf7.jpg"},view:3002212},{id:1,title:"盘点旧金山里那些文艺范儿的店盘点旧金山里那些文艺范盘点旧金山里那些文艺范盘点旧金山里那些文艺范盘点旧金山里那些文艺范",image:"http://www.haiwai.com/images/750/438/upload/classifiedinfo/e3/53/03/e35303ef3c6a5477ef7dcd6f6698554c.jpg",description:"盘点旧金山里那些文艺范",bizInfo:{name:"沸腾渔乡",address:"290 Barber Ct, Milpitas, CA 95035",logo:"http://www.haiwai.com/upload/biz/9d/10/5f/9d105fef7bb81eb57103915d800b7bf7.jpg"},dateline:Date.now(),view:3002212}];return this.mockData(i,t,a)},getSiteArticleDetail:function(e,t,a){var i={id:1,title:"盘点旧金山里那些文艺范儿的店盘点旧金山里那些文艺范盘点旧金山里那些文艺范盘点旧金山里那些文艺范盘点旧金山里那些文艺范",bizInfo:{name:"沸腾渔乡",address:"290 Barber Ct, Milpitas, CA 95035",logo:"http://www.haiwai.com/upload/biz/9d/10/5f/9d105fef7bb81eb57103915d800b7bf7.jpg"},msgbody:'<p>田肥美，国殷富，战车万乘，奋击百万，沃野千里，蓄积饶多，地势形便，此所谓天府，天下之雄国也。川菜讲究色、香、味、形，在“味”字上下功夫，以味的多、广、厚著称。</p><img src="http://www.haiwai.com/upload/biz/9d/10/5f/9d105fef7bb81eb57103915d800b7bf7.jpg"/><p>川菜口味的组成，主要有“麻、辣、咸、甜酸、苦、香”7种味道，巧妙搭配，灵活多变，创制出麻辣、酸辣、红油、白油等几十种各具特色的符合味，味别之多，调制之妙，堪称中外菜肴之首，从而赢得了“一菜一格，百菜百味”的称誉。</p><img src="http://www.haiwai.com/upload/biz/4d/4e/2b/4d4e2b5204381465f411cfa32ea6666c.jpg"/>"/><p>川菜作为中国八大菜系之一，在烹饪史上占有极其重要的地位。它取材广泛，调味多变，菜式多样，口味清鲜醇浓并重，以善用麻辣著称，并以其别具一格的烹调方法和浓郁的地方味享誉中外，成为中华民族饮食文化中一颗璀璨的明珠。</p>',dateline:Date.now(),view:"1,211,311",tag:"精选内容 | 美食Tips"};return this.mockData(i,t,a)}};
"use strict";!function(){KG.Class.define("BaseComponent",{_init:function(t,e,i){var a=this;this.box=t,this.config=i||{},this._initProp(),this.getData(t,e,function(t){a.data=t,a.initVar(),a._initView(),a._initEvent(),a._initEnd()})},getTemplate:function(){},initVar:function(){},_initView:function(){this.initView(),this.html=template.compile(this.getTemplate())(this.data),this.elem=$(this.html),KG.component.init(this.elem),this.jq=util.extend(this.setJqVar(),this.callParent("setJqVar"))},setJqVar:function(){return{}},_initEvent:function(){this.initEvent(),util.message.register(this.__name,this.registerMessage.bind(this))},_initEnd:function(){this.elem.data("kg-obj",this);var t=this.box.attr("style"),e=this.box.attr("class");this.elem.attr("style",t),this.elem.addClass(e),this.box.replaceWith(this.elem),this.initEnd()},getData:function(t,e,i){i.call(this,{})},_initProp:function(){var t=util.extend(this.defineProperty(),this.callParent("defineProperty")),e={},i=this.box;util.each(t,function(t,a){t=t||{};var s=i.data(a);e[a]=util.isUndefined(s)?t.defaultValue:util.isFunction(t.getter)?t.getter(s):s}),this.prop=e},defineProperty:function(){return{}},initView:util.noop,initEnd:util.noop,initEvent:util.noop,registerMessage:util.noop}),KG.Class.define("HeadingNav",{ParentClass:"BaseComponent",getTemplate:function(){return['<nav class="kg-header-nav-comp">','<div class="container">','<a href="../mybiz/index.html" class="nav js_mybiz">我的店铺</a>','<a href="../myfav/list.html" class="nav js_myfav">我的收藏</a>','<a href="../mycoupon/list.html" class="nav js_mycoupon">我的优惠</a>','<a href="../mysys/index.html" class="nav js_mysys">系统消息</a>','<a href="../mycount/info.html" class="nav js_mycount">账户</a>',"</div>","</nav>"].join("")},getData:function(t,e,i){var a=KG.data.get("page").split("-");a=a[0]||"",i({page:a})},initEnd:function(){var t=this.data.page;this.elem.find(".js_"+t).addClass("active")}}),KG.Class.define("MybizLeftUserNav",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-MybizLeftUserNav">','<a class="hw-img" href=""><img src="{{user.image}}" /></a>','<span class="hw-email">{{user.email}}</span>','<a href="index.html" class="hw-a js_index" style="margin-top: 24px;">我的店铺</a>','<a href="coupon.html" class="hw-a js_coupon">店铺优惠</a>','<a href="article.html" class="hw-a js_article">店铺文章</a>',"</div>"].join("")},getData:function(t,e,i){var a=KG.user.get(),s=KG.data.get("page").split("-");s=s[1]||"",i({user:a,page:s})},initEnd:function(){var t=this.data.page;this.elem.find(".js_"+t).addClass("active")}}),KG.Class.define("MybizRightStoreRank",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-MybizRightStoreRank">',"<span>您的店铺吸引力</span>",'<b class="js_rg">{{range}}%</b>','<div class="range"><em style="width:{{range}}%;"></em></div>',"<p>如何创建有影响力的店铺？</p>",'<a style="margin-top: 20px;" href="">完善店铺信息增加认知度</a>','<a href="">更多精美图片增加可信度</a>','<a href="">多发文章增加专业度</a>','<a href="">常发活动增加活跃度</a>',"</div>"].join("")},setJqVar:function(){return{wr:this.elem.find(".range").find("em"),txt:this.elem.find(".js_rg")}},getData:function(t,e,i){var a=this.prop.range;i({range:a})},setValue:function(t){this.data.range=t,this.jq.wr.css("width",t+"%"),this.jq.txt.text(t+"%")},registerMessage:function(t,e){console.log(e),this.setValue(e)},defineProperty:function(){return{range:{defaultValue:0}}}}),KG.Class.define("MybizRunningStoreList",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-comp-store-list">',"{{each list as item}}",'<div class="hw-each">','<img class="hw-img" src="{{item.logo | absImage}}" />',"<h4>{{item.name_cn}}</h4>","<p>{{item.address}}, {{item.city}}, {{item.state}}, {{item.zip}}</p>","<em>{{item.commentnum}}条新评论</em>",'<div class="r">','<a class="hw-a" href="editStore.html?id={{item.entityID}}">管理店铺</a>','<b class="hw-a js_share">分享</b>',"</div>","</div>","{{/each}}","</div>"].join("")},getData:function(t,e,i){KG.request.getBizList({},function(t,e){t&&i({list:e})})},initEvent:function(){this.elem.find(".js_share").click(function(){var t="http://www.haiwai.com";return util.dialog.showQrCode(t),!1})},initEnd:function(){util.delay(function(){util.message.publish("MybizRightStoreRank",80)},1e3)}}),KG.Class.define("MybizStopStoreList",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-comp-store-list">',"{{each list as item}}",'<div class="hw-each">','<img class="hw-img" src="{{item.logo | absImage}}" />',"<h4>{{item.name_cn}}</h4>","<p>{{item.address}}, {{item.city}}, {{item.state}}, {{item.zip}}</p>","<em>{{item.commentnum}}条新评论</em>",'<div class="r">','<a class="hw-a js_restart" href="">重新营业</a>','<a class="hw-a js_del" href="">删除</a>',"</div>","</div>","{{/each}}","</div>"].join("")},getData:function(t,e,i){KG.request.getBizList({},function(t,e){t&&i({list:e})})},initEvent:function(){var t=this;this.elem.find(".js_restart").click(function(){util.dialog.show()}),this.elem.find(".js_del").click(function(){return util.dialog.confirm({title:"确认要删除这个店铺吗？",msg:"点击确认，我们将为您删除这个店铺的所有信息，包括基本信息，图片，店铺评级和评论等，并且不能再找回这些信息，请谨慎操作。",YesFn:t.deleteStore}),!1}),this.elem.find(".js_restart").click(function(t){})},deleteStore:function(t){t()}}),KG.Class.define("MybizRunningCouponList",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-comp-store-list">',"{{each list as item}}",'<div class="hw-each">','<img class="hw-img" src="{{item.logo | absImage}}" />','<h4 style="margin-top: 20px;">{{item.title}}</h4>','<p style="color: #9b9b9b;font-size: 14px;margin-top:15px;">{{item.count}}人已经领取</p>','<div class="r">','<a class="hw-a" href="editCoupon.html?id={{item.id}}">管理优惠</a>','<a class="hw-a js_share" href="">分享</a>',"</div>","</div>","{{/each}}","</div>"].join("")},getData:function(t,e,i){KG.request.getBizCouponList({},function(t,e){t&&i({list:e})})}}),KG.Class.define("MybizStopCouponList",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-comp-store-list">',"{{each list as item}}",'<div class="hw-each">','<img class="hw-img" src="{{item.logo | absImage}}" />','<h4 style="margin-top: 10px;">{{item.title}}</h4>','<p style="color: #9b9b9b;font-size: 14px;margin-top:10px;">{{item.count}}人已经领取</p>','<p style="color: #9b9b9b;font-size: 14px;margin-top:5px;">{{item.startTime | formatDate}} 至 {{item.endTime | formatDate}}</p>','<div class="r">','<a class="hw-a" style="margin-top: 30px;" href="">删除</a>',"</div>","</div>","{{/each}}","</div>"].join("")},getData:function(t,e,i){KG.request.getBizCouponList({},function(t,e){t&&i({list:e})})}}),KG.Class.define("MybizCreateNewStore",{ParentClass:"BaseComponent",getTemplate:function(){var t={store:["添加新店铺","store_default.png","createStore.html"],coupon:["添加新优惠","coupon_default.png","createCoupon.html"],article:["添加新文章","article_default.png","createArticle.html"]},e=this.box.data("type");return['<a class="hw-MybizCreateNewStore" href="'+t[e][2]+'">','<div class="hw-img '+e+'"><img src="../../image/'+t[e][1]+'" /></div>','<i class="icon">＋</i>',"<b>",t[e][0],"</b>","</a>"].join("")},initEvent:function(){}}),KG.Class.define("MybizArticleList",{ParentClass:"BaseComponent",getTemplate:function(){return["<div>",'<div class="panel-heading">',"<b>文章 ({{list.length}})</b>","</div>",'<div class="hw-comp-store-list panel-body">',"{{each list as item}}",'<div class="hw-each">','<img class="hw-img" src="{{item.logo | absImage}}" />','<h4 style="margin-top:20px;">{{item.title}}</h4>','<p style="color: #9b9b9b;font-size: 14px;margin-top:20px;">发表于{{item.startTime | formatDate}}</p>','<div class="r">','<a class="hw-a" href="editArticle.html?id={{item.id}}">编辑</a>','<a class="hw-a" href="">分享</a>',"</div>","</div>","{{/each}}","</div>","</div>"].join("")},getData:function(t,e,i){KG.request.getBizCouponList({},function(t,e){t&&i({list:e})})}}),KG.Class.define("BackPageLink",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="container hw-comp-BackPageLink">','<a href="{{href}}"><i class="icon fa fa-angle-left"></i>{{title}}</a>',"</div>"].join("")},getData:function(t,e,i){i({title:t.data("title"),href:t.data("href")})}}),KG.Class.define("MybizEditStoreLeftNav",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-comp-MycountLeftNav">','<a class="hw-a js_editStore" href="editStore.html?id={{bizId}}">基本信息</a>','<a class="hw-a js_editStore_2" href="editStore_2.html?id={{bizId}}">更多描述</a>','<a class="hw-a js_editStore_3" href="editStore_3.html?id={{bizId}}">上传图片</a>',"</div>"].join("")},getData:function(t,e,i){var a=KG.data.get("page").split("-")[1],s=KG.data.get("id");i({page:a,bizId:s})},initEnd:function(){this.elem.find(".js_"+this.data.page).addClass("active").click(function(){return!1})}}),KG.Class.define("HWLoginRegBoxComp",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-loginRegBoxComp">','<div class="c-tlt">','<h4><b>加入海外同城</b><b style="margin-left: 85px;">让生活更简单</b></h4>','<img src="../../image/haiwai1.png" />',"</div>",'<div class="c-left js_left">',"</div>",'<div class="c-right">',"<h4>用以下账号直接登录</h4>",'<a class="hw-btn hw-weixin"></a>','<a class="hw-btn hw-fb"></a>',"</div>",'<div class="c-btm">',"</div>","</div>"].join("")},setJqVar:function(){return{tlt:this.elem.find(".c-tlt h4 b"),left:this.elem.find(".js_left"),btm:this.elem.find(".c-btm")}},setLoginBox:function(){this.jq.tlt.hide();var t=["<h4>登陆海外同城</h4>",'<input type="text" placeholder="邮箱" />','<input type="password" placeholder="密码" />','<button class="hw-btn hw-blue-btn js_loginBtn">登陆</button>','<p>忘记账号或密码？<a href="#">在这里找回</a></p>'].join("");this.jq.left.html(t);var e=['<p>还没有海外帐户？<a class="hw-btn js_toReg">注册</a></p>'].join("");this.jq.btm.html(e)},setRegBox:function(){var t=['<input type="text" placeholder="邮箱" />','<input type="password" placeholder="密码" />','<input type="password" placeholder="确认密码" />','<button class="hw-btn hw-blue-btn js_regBtn">注册</button>','<p>点击注册表示您同意海外同城的<a href="#">使用协议</a>和<a href="#">隐私保护协议</a></p>'].join("");this.jq.left.html(t),this.jq.tlt.show();var e=['<h6>已有海外帐户？<a href="javascript:void(0)" class="js_toLogin">直接登录</a></h6>'].join("");this.jq.btm.html(e)},defineProperty:function(){return{type:{defaultValue:"reg"}}},initEvent:function(){this.elem.on("click",".js_toReg",this.setRegBox.bind(this)),this.elem.on("click",".js_toLogin",this.setLoginBox.bind(this)),this.elem.on("click",".js_regBtn",function(){util.dialog.showRegBox({})}),this.elem.on("click",".js_loginBtn",function(){util.dialog.showLoginBox({})})},initEnd:function(){"login"===this.prop.type?this.setLoginBox():"reg"===this.prop.type&&this.setRegBox()}})}(),KG.component={initEach:function(t,e,i){i=i||{},new(KG.Class.getByName(t))(e,i)},init:function(t){t=t||$("body");var e=t.find("[role]");e.each(function(){var t=$(this);if(!t.attr("init-end")&&!t.attr("init-self")){var e=t.attr("role");KG.component.initEach(e,t,{})}})},initWithElement:function(t,e,i){var a=t.attr("role");if(a)return new(KG.Class.getByName(a))(t,e,i)},getObj:function(t){var e=t.data("kg-obj");return e||null}},$(function(){KG.component.init()});
!function(){KG.Class.define("SiteCouponFilterComp",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-SiteCouponFilterComp">','<div class="c">',"<label>优惠分类</label>",'<p class="js_cat">','<span param="all">不限</span>',"{{each tagList as item}}",'<span param="{{item.id}}">{{item.name}}</span>',"{{/each}}","</p>","</div>",'<div class="c">',"<label>地区</label>",'<p class="js_loc">','<span param="all">不限</span>',"{{each locList as item}}",'<span param="{{item}}">{{item}}</span>',"{{/each}}","</p>","</div>","</div>"].join("")},getData:function(a,t,i){var e=[{name:"餐饮美食",id:"001"},{name:"私家小店",id:"002"}],s=["San Francisco","Palo Alto","San Mateo","San Jose","Cuppertino","Fremont","Union City","Sunnyvale","Palo Alto","San Mateo","San Jose","Cuppertino","Fremont"];i({tagList:e,locList:s,tag:null,loc:null})},setJqVar:function(){return{catBox:this.elem.find(".js_cat"),locBox:this.elem.find(".js_loc")}},initEvent:function(){var a=this;this.jq.catBox.on("click","span",function(t){var i=$(this);return i.hasClass("active")?!1:(a.jq.catBox.find("span").removeClass("active"),i.addClass("active"),a.data.tag=i.attr("param"),void a.setFilter())}),this.jq.locBox.on("click","span",function(t){var i=$(this);return i.hasClass("active")?!1:(a.jq.locBox.find("span").removeClass("active"),i.addClass("active"),a.data.loc=i.attr("param"),void a.setFilter())})},setFilter:function(){var a=this.data;console.log(a.tag,a.loc),util.message.publish("hw-SiteCouponFilterComp",a)},initEnd:function(){var a=this;this.jq.catBox.find("span").eq(0).addClass("active"),this.jq.locBox.find("span").eq(0).addClass("active"),this.data.tag="all",this.data.loc="all",util.delay(function(){a.setFilter()},500)}}),KG.Class.define("SiteCouponAscComp",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-SiteCouponAscComp">','<b>人气<i class="fa fa-arrow-down"></i></b>',"</div>"].join("")}}),KG.Class.define("HWSiteCouponListPage",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-HWSiteCouponListPage">','<div role="SiteCouponFilterComp"></div>','<div style="margin-top: 24px;" role="SiteCouponAscComp"></div>','<div class="box js_box"></div>','<div class="hw-cpage js_cpage"></div>',"</div>"].join("")},initVar:function(){this.tag=null,this.loc=null,this.page=1},setJqVar:function(){return{box:this.elem.find(".js_box"),pageBox:this.elem.find(".js_cpage")}},getData:function(a,t,i){i({})},initEvent:function(){var a=this;util.message.register("hw-SiteCouponFilterComp",function(t,i){a.loc=i.loc,a.tag=i.tag,a.page=1,a.getListData(function(t){a.setBoxHtml(t),a.setIndexPageHtml({})})}),this.jq.pageBox.on("click","a.js_p",function(){var t=$(this);return t.hasClass("active")?!1:(a.jq.pageBox.find("a.js_p").removeClass("active"),t.addClass("active"),a.page=t.html(),void a.getListData(function(t){a.setBoxHtml(t)}))}),this.jq.pageBox.on("click",".js_prev",function(a){}),this.jq.pageBox.on("click",".js_next",function(){})},getListData:function(a){self.loc,self.tag,self.page;KG.request.getBizCouponList({},function(t,i){t&&a(i)})},getItemTemplate:function(){return["{{each list as item}}",'<div class="hw-one">','<div class="hw-logo"><img src="{{item.logo | absImage}}" /></div>',"<h4>{{item.bizInfo.name}}</h4>",'<span class="hw-address">{{item.bizInfo.address}}</span>',"<h3>{{item.title}}</h3>","</div>","{{/each}}"].join("")},setBoxHtml:function(a){var t=this.getItemTemplate();t=template.compile(t)({list:a}),this.jq.box.html(t)},setIndexPageHtml:function(a){for(var t=["<nav>",'<ul class="pagination">',"<li>",'<a href="javascript:void(0)" class="js_prev">上一页</a>',"</li>","{{each pageList as item}}",'<li><a href="javascript:void(0)" class="js_p">{{item}}</a></li>',"{{/each}}","<li>",'<a href="javascript:void(0)" class="js_next">下一页</a>',"</li>","</ul>","</nav>"].join(""),i=a.totalPage||5,e=[],s=0;i>s;s++)e.push(s+1);t=template.compile(t)({pageList:e}),this.jq.pageBox.html(t)}})}();
!function(){KG.Class.define("SiteAticleListLeftNav",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-SiteAticleListLeftNav">',"{{each list as item}}","<h4>{{item}}</h4>","{{/each}}","</div>"].join("")},getData:function(e,t,i){var a=["热门精选","健康知识","教育宝典","美食tips","生活指南","投资理财","商家专栏"];i({list:a})},initEvent:function(){var e=this;this.elem.on("click","h4",function(){var t=$(this);return t.hasClass("active")?!1:(e.elem.find("h4").removeClass("active"),t.addClass("active"),void e.publish(t))})},publish:function(e){var t=e.html();util.message.publish("HWSiteArticleListPage",{msg:t,elem:e})},initEnd:function(){var e=this;e.elem.find("h4").eq(0).trigger("click")}}),KG.Class.define("HWSiteArticleListPage",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-HWSiteArticleListPage">','<div class="hw-head">','<label class="js_title"></label>',"</div>",'<div class="hw-box js_box"></div>','<div class="hw-cpage js_cpage"></div>',"</div>"].join("")},getData:function(e,t,i){i({})},setTitle:function(e){this.elem.find(".js_title").html(e)},registerMessage:function(e,t){var i=this,a=t.msg;this.setTitle(a),KG.request.getSiteArticleList({},function(e,t){e&&(i.setBoxHtml(t),i.page=1,i.setIndexPageHtml({}))})},getItemTemplate:function(){return["{{each list as item}}",'<div class="hw-one">','<img src="{{item.image}}" />',"<h4>{{item.title}}</h4>","<h6>{{item.description}}</h6>","<p>",'<span class="hw-time">{{item.dateline | formatDate:"yy年mm月dd日"}}</span>','<span class="hw-view">','<i class="fa fa-eye"></i>',"{{item.view}}","</span>","</p>","</div>","{{/each}}"].join("")},setBoxHtml:function(e){var t=this.getItemTemplate();t=template.compile(t)({list:e}),this.elem.find(".js_box").html(t)},initVar:function(){this.page=1},setJqVar:function(){return{pageBox:this.elem.find(".js_cpage")}},initEvent:function(){var e=this;this.jq.pageBox.on("click","a.js_p",function(){var t=$(this);return t.hasClass("active")?!1:(e.jq.pageBox.find("a.js_p").removeClass("active"),t.addClass("active"),void(e.page=t.html()))})},setIndexPageHtml:function(e){for(var t=["<nav>",'<ul class="pagination">',"<li>",'<a href="javascript:void(0)" class="js_prev">上一页</a>',"</li>","{{each pageList as item}}",'<li><a href="javascript:void(0)" class="js_p">{{item}}</a></li>',"{{/each}}","<li>",'<a href="javascript:void(0)" class="js_next">下一页</a>',"</li>","</ul>","</nav>"].join(""),i=e.totalPage||5,a=[],s=0;i>s;s++)a.push(s+1);t=template.compile(t)({pageList:a}),this.elem.find(".js_cpage").html(t)}})}();
!function(){KG.Class.define("HWSiteArticleDetailPage",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-SiteArticleDetailPage">','<p class="hw-tap">{{data.tag}}</p>',"<h3>{{data.title}}</h3>",'<p class="hw-st">','<span class="hw-time">{{data.dateline | formatDate:"yy年mm月dd日"}}</span>','<span class="hw-wx">','<i class="fa fa-weixin"></i>',"分享","</span>",'<span class="hw-view">','<i class="fa fa-eye"></i>',"{{data.view}}","</span>","</p>",'<div class="hw-biz">','<img src="{{data.bizInfo.logo}}" />',"<h6>{{data.bizInfo.name}}</h6>",'<p class="hw-p">{{data.bizInfo.address}}</p>',"</div>",'<div class="hw-article">{{#data.msgbody}}</div>','<div class="hw-share">','<b><i class="fa fa-weixin"></i>分享文章到微信</b>',"</div>","</div>"].join("")},getData:function(e,i,a){KG.request.getSiteArticleDetail({},function(e,i){e&&a({data:i})})}}),KG.Class.define("HWSiteArticleDetailMoreComp",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-HWSiteArticleDetailMoreComp">','<div class="hw-head">','<label class="js_title">本店更多文章</label>',"</div>",'<div class="hw-box js_box">',"{{each list as item}}",'<div class="hw-one">','<img src="{{item.image}}" />',"<h4>{{item.title}}</h4>",'<div class="hw-biz">','<img src="{{item.bizInfo.logo}}" />',"<h6>{{item.bizInfo.name}}</h6>",'<p class="hw-p">{{item.bizInfo.address}}</p>',"</div>","<p>",'<span class="hw-time">{{item.dateline | formatDate:"yy年mm月dd日"}}</span>','<span class="hw-view">','<i class="fa fa-eye"></i>',"{{item.view}}","</span>","</p>","</div>","{{/each}}","</div>","</div>"].join("")},getData:function(e,i,a){KG.request.getSiteArticleList({},function(e,i){e&&a({list:i})})}}),KG.Class.define("HWSiteArticleDetailRightMoreCommentComp",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-HWSiteArticleDetailRightMoreCommentComp">','<div class="hw-head">','<label class="js_title">热门文章</label>',"</div>",'<div class="hw-box js_box">',"{{each list as item}}",'<div class="hw-one">',"<h4>{{item.title}}</h4>","</div>","{{/each}}","</div>","</div>"].join("")},getData:function(e,i,a){KG.request.getSiteArticleList({},function(e,i){e&&a({list:i})})}})}();
!function(){KG.Class.define("HWLandingTopBox",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-landingTopBox container-fluid"><div class="container">',"<h3>创建网上店铺，直达百万顾客</h3>",'<p class="c1">',"两分钟建个高颜值的个性化店面<br/>","发优惠、发文章，微信群、朋友圈自由传播<br/>","海外最大的媒体平台帮你直达400万华人","</p>",'<img src="../../image/haiwai1.png" class="hw-img" />','<div class="hw-box">',"</div>","</div></div>"].join("")},setJqVar:function(){return{box:this.elem.find(".hw-box")}},defineProperty:function(){return{login:{defaultValue:!1}}},setLoginBox:function(){var i=['<input style="margin-top: 55px;" type="text" class="hw-input js_email" placeholder="邮箱" />','<input type="password" style="margin-top: 25px;" class="hw-input js_pwd" placeholder="密码" />','<a href="javascript:void(0)" class="hw-btn hw-blue-btn js_login">立即登录，创建店铺</a>','<p>还没有海外帐户？<b class="js_toReg">注册</b></p>'].join("");this.jq.box.html(i)},setRegBox:function(){var i=['<input style="margin-top: 10px;" type="text" class="hw-input js_email" placeholder="邮箱" />','<input type="password" style="margin-top: 15px;" class="hw-input js_pwd" placeholder="密码" />','<input type="password" style="margin-top: 15px;" class="hw-input js_pwd2" placeholder="确认密码" />','<a href="javascript:void(0)" style="margin-top: 15px;" class="hw-btn hw-blue-btn js_reg">立即注册，创建店铺</a>','<em>点击注册表示您同意海外同城的<a href="">使用协议</a>和<a>隐私保护协议</a></em>','<p>已有海外帐户？<b class="js_toLogin">直接登录</b></p>'].join("");this.jq.box.html(i)},setAfterLoginBox:function(){var i='<a href="javascript:void(0)" style="margin-top: 200px;" class="hw-btn hw-blue-btn">我是商家，创建店铺</a>';this.jq.box.html(i)},getData:function(i,s,n){console.log(this.prop);var t=this.prop.login;n({isLogin:t})},initEvent:function(){this.elem.on("click",".js_toReg",this.setRegBox.bind(this)),this.elem.on("click",".js_toLogin",this.setLoginBox.bind(this))},initEnd:function(){this.data.isLogin?(this.elem.addClass("hw-is-login"),this.setAfterLoginBox()):(this.setLoginBox(),this.elem.addClass("hw-not-login"))}}),KG.Class.define("HWLandingBigImage",{ParentClass:"BaseComponent",getTemplate:function(){return['<div class="hw-landingBigImage">','<div class="container-fluid"><div class="box c1">','<img src="../../image/landing/page01.png" />','<p class="p1">零成本投入，免费注册海外就可以创建<br/>高颜值、个性化店铺主页，并即刻分享到微信</p>','<p class="p2">扫描二维码，<br/>免费下载商家版App<br/>随时随地轻松管理店铺</p>',"</div></div>",'<div style="background: #f7f7f7;" class="container-fluid"><div class="box c2">','<img src="../../image/landing/page02.png" />',"<h3>发优惠，聚人气</h3>",'<p class="p1">优惠券、折扣、买赠…轻松发布各种优惠到<br/>海外同城平台，让更多的顾客认识和喜欢上<br/>您的店铺</p>',"</div></div>",'<div class="container-fluid"><div class="box c3">','<img src="../../image/landing/page03.png" />',"<h3>发文章，塑品牌</h3>",'<p class="p1">发表专业文章、店铺软文，塑造品牌形象，<br/>同步到微信，收获更多的点赞和粉丝</p>',"</div></div>",'<div style="background: #f7f7f7;" class="container-fluid"><div class="box c4">','<img src="../../image/landing/page04.png" />',"</div></div>","</div>"].join("")}})}();